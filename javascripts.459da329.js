parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"vyzc":[function(require,module,exports) {
"use strict";function e(e){const t=e;let r=0;this.getId=(()=>t),this.getScore=(()=>Number(r)),this.setScore=(e=>{if(e<0)throw new Error("Score cannot be negative");r=Number(e)}),this.toString=(()=>"id: "+t+", score: "+r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Player=e;
},{}],"szGU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Game=r;var e=require("./player-module-v2");function r(e,r){const t=e;let n=r,s=void 0,i=[],a=1;this.getGameName=(()=>t),this.addPlayer=(e=>{i.push(e)}),this.removePlayer=(e=>{if(i.length===(i=i.filter(r=>r.id!==e.id)).length)throw new Error("Cannot remove the player. Player not found.")}),this.getNoOfPlayers=(()=>i.length),this.setNoOfTurns=(e=>{n=e}),this.getNoOfTurns=(()=>n),this.incrementTurn=(()=>{if(!(a<n))throw new Error("Current turn can not be larger than total number of turns.");a++}),this.resetCurrentTurn=(()=>{a=1}),this.getCurrentTurn=(()=>a),this.getCurrentPlayer=(()=>s),this.setCurrentPlayer=(e=>{s=e}),this.getWinners=(()=>{const e=_isDrawInternal(),r=[];return i.forEach(t=>{t===e.highestScore&&r.push(t)}),r}),this.isDraw=(()=>{return this._isDrawInternal().frequency>1}),this._isDrawInternal=(()=>{let e=0,r=new Map;return i.forEach(t=>{const n=t.getScore();e=n>e?n:e,r.has(n)?r.set(n,r.get(n)+1):r.set(n,1)}),{highestScore:e,frequency:r.get(e)}}),this.toString=(()=>"name: "+t+", noOfTurns: "+n+", currTurn: "+a+", currPlayer: "+s+"\nplayers: "+i.toString())}
},{"./player-module-v2":"vyzc"}],"CEPk":[function(require,module,exports) {
"use strict";var e=require("../modulev2/player-module-v2"),t=require("../modulev2/game-module-v2");let n=document.getElementById("flag"),r=document.querySelector("#options .option:nth-of-type(1) label"),o=document.querySelector("#options .option:nth-of-type(2) label"),l=document.querySelector("#options .option:nth-of-type(3) label"),c=document.getElementById("choice1"),a=document.getElementById("choice2"),i=document.getElementById("choice3"),u=document.getElementById("circleOne"),s=document.getElementById("circleTwo"),d=document.getElementById("circleThree"),g=document.getElementById("answer"),m=document.querySelector("form"),y=document.querySelector("#rightScore"),f=document.querySelector("#leftScore"),h=document.querySelector("#resetBtn");const p=3,S="https://restcountries.eu/rest/v2/all";let I,v,T,w=[],b=document.getElementById("nextBtn"),L=1,P=!1,M=new t.Game("Flag game",2);const C=new e.Player(1),E=new e.Player(2);async function B(){I=await F(),x()}function q(){console.log("Init game")}function N(){if(M.isDraw())g.innerHTML="There is a draw!!!!";else if(C.getScore()>E.getScore()){let e=localStorage.getItem("player1");localStorage.setItem("player1",Number(e)+1),g.innerHTML="player one has won."}else{let e=localStorage.getItem("player2");localStorage.setItem("player2",Number(e)+1),g.innerHTML="player two has won."}y.classList.add("activePlayer"),f.classList.remove("activePlayer"),C.setScore(0),E.setScore(0),Q()}function H(){console.log("Updating score");let e=M.getCurrentPlayer();e.setScore(e.getScore()+1)}function k(){console.log("Change turns"),M.getCurrentTurn()<M.getNoOfTurns()?(console.log("incrementing turn"),M.incrementTurn()):(M.getCurrentPlayer().getId()===C.getId()?(console.log("swapping players"),y.classList.remove("activePlayer"),f.classList.add("activePlayer"),M.setCurrentPlayer(E)):(console.log("Current player id"+M.getCurrentPlayer().getId()),console.log("init new match"),M.setCurrentPlayer(C),N()),console.log("resetting turn to 0"),M.resetCurrentTurn())}async function x(){g.innerHTML="",w=O(),v=w[0],K(w),U(A()),z(J(v)),c.disabled=!1,a.disabled=!1,i.disabled=!1,c.checked=!1,a.checked=!1,i.checked=!1}function O(){return[G(0,I.length),G(0,I.length),G(0,I.length)]}function D(e){return G(0,e.length)}async function F(){try{let t=await fetch(S);return await t.json()}catch(e){console.log(e)}}function j(e){g.innerHTML=e}function G(e,t){return e=Math.ceil(e),t=Math.floor(t)-1,Math.floor(Math.random()*(t-e+1))+e}function U(e){r.innerText=I[w[0]].name,o.innerText=I[w[1]].name,l.innerText=I[w[2]].name,c.value=w[0],a.value=w[1],i.value=w[2]}function z(e){n.src=e}function A(){let e,t=[];for(let n=0;n<w.length;n++)e=w[n],t[n]=I[e].name;return t}function J(e){return I[e].flag}function K(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*t),r=e[t];e[t]=e[n],e[n]=r}}function Q(){y.innerHTML="["+localStorage.getItem("player1")+"]player one: "+C.getScore()+"/"+M.getNoOfTurns(),f.innerHTML="["+localStorage.getItem("player2")+"]player two: "+E.getScore()+"/"+M.getNoOfTurns()}M.addPlayer(C),M.addPlayer(E),M.setCurrentPlayer(C),B(),q(),y.classList.add("activePlayer"),null===localStorage.getItem("player1")?(localStorage.setItem("player1",Number(0)),localStorage.setItem("player2",Number(0)),Q()):Q(),m.addEventListener("submit",function(e){P=!0;var t=new FormData(m);let n="";c.disabled=!0,a.disabled=!0,i.disabled=!0;for(const r of t)n=r[1];Number(n)===v?(j("Correct!"),H()):j("Inncorect! Correct answer is "+I[v].name),k(),Q(),e.preventDefault()},!1),b.addEventListener("click",function(){P&&(x(),P=!1)}),h.addEventListener("click",function(){C.setScore(0),E.setScore(0),Q()});
},{"../modulev2/player-module-v2":"vyzc","../modulev2/game-module-v2":"szGU"}]},{},["CEPk"], null)
//# sourceMappingURL=/javascripts.459da329.js.map